<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <div th:replace="~{fragments :: head_styles}"></div>

    <style>
        /* –Ü–°–ù–£–Æ–ß–Ü –°–¢–ò–õ–Ü HERO SECTION (–ë–ï–ó –ó–ú–Ü–ù) */
        #hero-section {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            color: #ffffff;
            background: linear-gradient(135deg, #0f4c75, #1d976c);
            background-size: 200% 200%;
            animation: gradient-animation 10s ease infinite;
            position: relative;
            z-index: 5;
        }
        @keyframes gradient-animation { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        #hero-section h1 { font-size: 4.5rem; font-weight: 900; letter-spacing: 2px; margin-bottom: 20px; text-shadow: 0 4px 8px rgba(0, 0, 0, 0.4); opacity: 0; animation: fadeInScale 1s ease-out 0.5s forwards; }
        #hero-section p { font-size: 1.5rem; max-width: 600px; margin-top: 0; opacity: 0; animation: fadeInScale 1s ease-out 1s forwards; }
        @keyframes fadeInScale { 0% { opacity: 0; transform: scale(0.95); } 100% { opacity: 1; transform: scale(1); } }
        .scroll-indicator { position: absolute; bottom: 30px; color: rgba(255, 255, 255, 0.8); font-size: 1.2rem; animation: bounce 2s infinite; }
        @keyframes bounce { 0%, 20%, 50%, 80%, 100% { transform: translateY(0); } 40% { transform: translateY(-10px); } 60% { transform: translateY(-5px); } }

        /* –ü–û–ö–†–ê–©–ï–ù–ù–Ø –ö–ê–†–¢–û–ö-–õ–Ü–ß–ò–õ–¨–ù–ò–ö–Ü–í */
        .count-link {
            text-decoration: none;
            display: block;
            height: 100%;
            color: inherit;
        }

        .count-card {
            border: none;
            border-radius: 1rem;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            overflow: hidden;
            position: relative;
            min-height: 150px;
            color: white !important;
        }
        .count-link:hover .count-card {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        .count-card::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            background: rgba(255, 255, 255, 0.1);
            transition: background 0.3s ease;
        }
        .count-link:hover .count-card::after {
            background: rgba(255, 255, 255, 0.2);
        }
        .count-card .icon-bg {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 4rem;
            opacity: 0.3;
        }

        /* –°—Ç–∏–ª—å –¥–ª—è —à–≤–∏–¥–∫–∏—Ö –ø–æ—Å–∏–ª–∞–Ω—å */
        .card-link-custom {
            display: block;
            padding: 1.5rem;
            border-radius: 0.75rem;
            background-color: #ffffff;
            border: 1px solid #dee2e6;
            color: #212529;
            text-decoration: none;
            transition: all 0.3s;
            font-weight: bold;
        }
        .card-link-custom:hover {
            background-color: #f0f7ff;
            border-color: #0d6efd;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(13, 110, 253, 0.1);
        }

        /* –ù–û–í–Ü –°–¢–ò–õ–Ü –î–õ–Ø –°–¢–†–Ü–ö–ï–†–ê –°–¢–ê–¢–£–°–£ */
        .status-ticker-card {
            border-radius: 1rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
            border: 1px solid #ddd;
        }
        .status-ticker-card:hover {
            transform: scale(1.02);
        }

        .pulse {
            animation: pulse-animation 2s infinite;
        }
        @keyframes pulse-animation {
            0% { box-shadow: 0 0 0 0 rgba(255, 193, 7, 0.5); }
            70% { box-shadow: 0 0 0 15px rgba(255, 193, 7, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 193, 7, 0); }
        }

        /* –°–¢–ò–õ–Ü –î–õ–Ø –ù–û–í–û–ì–û –Ü–ù–§–û-–ë–õ–û–ö–£ */
        .info-block {
            background: linear-gradient(180deg, #e9ecef, #ffffff);
            border-radius: 1.5rem;
            padding: 40px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
            border: 1px solid #dee2e6;
        }
        .info-block h3 {
            color: #0f4c75;
            font-weight: 700;
            margin-bottom: 20px;
        }

        /* –°–¢–ò–õ–Ü –î–õ–Ø –°–•–ï–ú–ò –ê–†–•–Ü–¢–ï–ö–¢–£–†–ò */
        .flow-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            margin-top: 20px;
        }

        .flow-module {
            background-color: #0d6efd;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
            margin: 5px 0;
            transition: background-color 0.3s;
        }
        .flow-module:hover {
            background-color: #0b5ed7;
        }

        .flow-arrow {
            color: #6c757d;
            font-size: 1.5rem;
            margin: 5px 0;
        }

        .flow-core {
            background-color: #dc3545; /* –ß–µ—Ä–≤–æ–Ω–∏–π –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω–æ–≥–æ —è–¥—Ä–∞ */
            padding: 10px 20px;
            border-radius: 10px;
            font-weight: bold;
            font-size: 1rem;
            color: white;
            box-shadow: 0 6px 15px rgba(220, 53, 69, 0.5);
            margin: 15px 0;
        }
    </style>
</head>
<body>

<section id="hero-section">
    <h1>CP SYSTEM</h1>
    <p>–Ü–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É —Ç–∞ –æ–±–ª—ñ–∫—É –Ω–∞–¥–∑–≤–∏—á–∞–π–Ω–∏—Ö —Å–∏—Ç—É–∞—Ü—ñ–π</p>
    <div class="scroll-indicator">
        –ü—Ä–æ–∫—Ä—É—Ç—ñ—Ç—å —É–Ω–∏–∑, —â–æ–± –ø–æ—á–∞—Ç–∏ —Ä–æ–±–æ—Ç—É
        <i class="bi bi-arrow-down-circle-fill ms-2"></i>
    </div>
</section>

<div th:replace="~{fragments :: sidebar('dashboard')}"></div>

<div class="main-content">

    <div class="row mb-5">
        <div class="col-12">
            <div class="info-block">
                <h2 class="text-center mb-4 text-primary">
                    <i class="bi bi-rocket-takeoff-fill me-2"></i> –ù–∞—à–∞ –º—ñ—Å—ñ—è: –ö–æ–º–ø–ª–µ–∫—Å–Ω–∏–π –∑–∞—Ö–∏—Å—Ç —Ç–∞ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å
                </h2>
                <div class="row align-items-center">
                    <div class="col-lg-6">
                        <h3 class="fw-bold text-dark">–ß–æ–º—É CP System —î –∫—Ä–∏—Ç–∏—á–Ω–æ—é?</h3>
                        <p class="lead text-dark">
                            CP System (Civil Protection System)** ‚Äî —Ü–µ —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, —Å—Ç–≤–æ—Ä–µ–Ω–∏–π –¥–ª—è –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–∏—Ä–∏—Ö –¥–∞–Ω–∏—Ö –Ω–∞ –∫—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–ª–∏–≤—ñ —Ä—ñ—à–µ–Ω–Ω—è. –ù–∞—à–∞ –º–µ—Ç–∞ ‚Äî –∑–∞–±–µ–∑–ø–µ—á–∏—Ç–∏ –º–∏—Ç—Ç—î–≤–µ —Ä–µ–∞–≥—É–≤–∞–Ω–Ω—è —Ç–∞ –º—ñ–Ω—ñ–º—ñ–∑–∞—Ü—ñ—é –Ω–∞—Å–ª—ñ–¥–∫—ñ–≤ –±—É–¥—å-—è–∫–æ—ó –Ω–∞–¥–∑–≤–∏—á–∞–π–Ω–æ—ó —Å–∏—Ç—É–∞—Ü—ñ—ó.
                        </p>
                        <ul class="list-unstyled">
                            <li class="mb-2 fw-bold"><i class="bi bi-check-circle-fill text-success me-2"></i> –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥: –û–±–ª—ñ–∫ –æ–±'—î–∫—Ç—ñ–≤ —Ç–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –∞–≤–∞—Ä—ñ–π–Ω–∏—Ö –ø–æ–¥—ñ–π.</li>
                            <li class="mb-2 fw-bold"><i class="bi bi-check-circle-fill text-success me-2"></i> –ê–Ω–∞–ª—ñ–∑ –í–ø–ª–∏–≤—É: –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –¥–æ–∑–æ–≤–∏—Ö –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—å —Ç–∞ –º–µ–¥–∏—á–Ω–∏—Ö –Ω–∞—Å–ª—ñ–¥–∫—ñ–≤.</li>
                            <li class="mb-2 fw-bold"><i class="bi bi-check-circle-fill text-success me-2"></i> –§—ñ–Ω–∞–Ω—Å–æ–≤–∏–π –ö–æ–Ω—Ç—Ä–æ–ª—å: –ü—Ä–æ–∑–æ—Ä–∏–π –æ–±–ª—ñ–∫ –≤–∏—Ç—Ä–∞—Ç –Ω–∞ –ª—ñ–∫–≤—ñ–¥–∞—Ü—ñ—é —Ç–∞ –∑–∞–ø–æ–±—ñ–∂–Ω—ñ –∑–∞—Ö–æ–¥–∏.</li>
                        </ul>
                        <p class="small text-muted mt-3">
                            –°–∏—Å—Ç–µ–º–∞ –Ω–∞–¥–∞—î –∫—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–ª–∏–≤—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –¥–ª—è –ø—Ä–∏–π–Ω—è—Ç—Ç—è —Ä—ñ—à–µ–Ω—å –Ω–∞ –æ—Å–Ω–æ–≤—ñ –¥–∞–Ω–∏—Ö, –∑–∞–±–µ–∑–ø–µ—á—É—é—á–∏ –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —Ä–µ–∞–≥—É–≤–∞–Ω–Ω—è. –î–æ—Å—Ç—É–ø –¥–æ –≤—Å—ñ—Ö –º–æ–¥—É–ª—ñ–≤ –∑–¥—ñ–π—Å–Ω—é—î—Ç—å—Å—è —á–µ—Ä–µ–∑ –±—ñ—á–Ω—É –Ω–∞–≤—ñ–≥–∞—Ü—ñ–π–Ω—É –ø–∞–Ω–µ–ª—å.
                        </p>
                    </div>
                    <div class="col-lg-6 text-center">
                        <div class="p-4 bg-white rounded-3 border">
                            <h4 class="text-muted mb-3">–Ø–¥—Ä–æ –ê–Ω–∞–ª—ñ—Ç–∏–∫–∏ —Ç–∞ –ü—Ä–æ–≥–Ω–æ–∑—É–≤–∞–Ω–Ω—è</h4>

                            <div class="flow-container">

                                <div class="d-flex justify-content-center gap-2">
                                    <div class="flow-module"><i class="bi bi-building"></i> –û–±'—î–∫—Ç–∏ (Facility)</div>
                                    <div class="flow-module"><i class="bi bi-exclamation-triangle"></i> –ù–° (Emergency)</div>
                                    <div class="flow-module"><i class="bi bi-radioactive"></i> –î–æ–∑–∏ (Dose)</div>
                                </div>

                                <i class="bi bi-arrow-down-circle-fill flow-arrow"></i>

                                <div class="flow-core">
                                    <i class="bi bi-cpu-fill me-2"></i> –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–µ –ê–Ω–∞–ª—ñ—Ç–∏—á–Ω–µ –Ø–¥—Ä–æ
                                </div>

                                <i class="bi bi-arrow-down-circle-fill flow-arrow"></i>

                                <div class="d-flex justify-content-center gap-2">
                                    <div class="flow-module" style="background-color: #198754;"><i class="bi bi-heart-pulse"></i> –í–ø–ª–∏–≤ –Ω–∞ –∑–¥–æ—Ä–æ–≤'—è</div>
                                    <div class="flow-module" style="background-color: #6f42c1;"><i class="bi bi-cash"></i> –§—ñ–Ω–∞–Ω—Å–æ–≤–∏–π –û–±–ª—ñ–∫</div>
                                    <div class="flow-module" style="background-color: #ffc107; color: black;"><i class="bi bi-tools"></i> –ó–∞—Ö–æ–¥–∏</div>
                                </div>

                            </div>
                            <p class="small mt-2 text-muted">
                                –°—Ö–µ–º–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î –≤–∑–∞—î–º–æ–¥—ñ—é –∫–ª—é—á–æ–≤–∏—Ö –º–æ–¥—É–ª—ñ–≤ —Ç–∞ —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥ –¥–æ –¥–∞–Ω–∏—Ö.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <h2 class="fw-bolder mb-5 border-bottom pb-2 text-primary">üè† –û–≥–ª—è–¥ –°–∏—Å—Ç–µ–º–∏ –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è</h2>

    <div class="row g-4 mb-5">

        <div class="col-md-6 col-lg-4">
            <a th:href="@{/ui/facilities}" class="count-link">
                <div class="count-card bg-primary p-4 h-100">
                    <div class="icon-bg"><i class="bi bi-building"></i></div>
                    <h5 class="mb-1 text-uppercase small opacity-75">–û–±–ª—ñ–∫–æ–≤–∞–Ω–æ –û–±'—î–∫—Ç—ñ–≤</h5>
                    <p class="fs-1 fw-bolder mb-0" th:text="${facilitiesCount}"></p>
                    <span class="btn btn-sm btn-light mt-2 fw-bold opacity-75">–î–µ—Ç–∞–ª—ñ <i class="bi bi-arrow-right"></i></span>
                </div>
            </a>
        </div>

        <div class="col-md-6 col-lg-4">
            <a th:href="@{/ui/emergencies}" class="count-link">
                <div class="count-card bg-danger p-4 h-100">
                    <div class="icon-bg"><i class="bi bi-exclamation-triangle-fill"></i></div>
                    <h5 class="mb-1 text-uppercase small opacity-75">–ó–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–æ –ù–°</h5>
                    <p class="fs-1 fw-bolder mb-0" th:text="${emergenciesCount}"></p>
                    <span class="btn btn-sm btn-light mt-2 fw-bold opacity-75">–î–µ—Ç–∞–ª—ñ <i class="bi bi-arrow-right"></i></span>
                </div>
            </a>
        </div>

        <div class="col-lg-4">
            <div class="card-custom p-3 h-100">
                <h5 class="fw-bold mb-3 text-muted">–†–æ–∑–ø–æ–¥—ñ–ª –ù–° –∑–∞ —Ç–∏–ø–æ–º</h5>
                <div style="height: 100px;"><canvas id="emergencyTypeChart"></canvas></div>
            </div>
        </div>

    </div>

    <h3 class="fw-bolder mt-4 mb-4 text-secondary">–ê–∫—Ç—É–∞–ª—å–Ω—ñ –ø–æ–∫–∞–∑–Ω–∏–∫–∏ —Å–∏—Å—Ç–µ–º–∏ (LIVE)</h3>

    <div class="row g-4 mb-5">

        <div class="col-md-4">
            <div class="status-ticker-card bg-warning p-4 text-dark text-center pulse">
                <i class="bi bi-shield-fill-exclamation fs-3"></i>
                <h4 class="mt-2 mb-1 fw-bold">–°—Ç–∞—Ç—É—Å –†–∏–∑–∏–∫—É</h4>
                <p class="fs-2 fw-bolder mb-0">–°–ï–†–ï–î–ù–Ü–ô</p>
            </div>
        </div>

        <div class="col-md-4">
            <div class="status-ticker-card bg-light p-4 text-center">
                <i class="bi bi-radioactive fs-3 text-success"></i>
                <h4 class="mt-2 mb-1 fw-bold">–°–µ—Ä. –ï–∫–≤—ñ–≤–∞–ª–µ–Ω—Ç–Ω–∞ –î–æ–∑–∞</h4>
                <p class="fs-2 fw-bolder mb-0">0.05 –ó–≤</p>
            </div>
        </div>

        <div class="col-md-4">
            <div class="status-ticker-card bg-light p-4 text-center">
                <i class="bi bi-hourglass-split fs-3 text-danger"></i>
                <h4 class="mt-2 mb-1 fw-bold">–ê–∫—Ç–∏–≤–Ω–∏—Ö –ù–°</h4>
                <p class="fs-2 fw-bolder mb-0">3</p>
            </div>
        </div>

    </div>

    <h3 class="fw-bold mt-4 mb-3 text-muted">–®–≤–∏–¥–∫–∏–π –ø–µ—Ä–µ—Ö—ñ–¥</h3>
    <div class="row g-3">
        <div class="col-md-4">
            <a href="/ui/emergencies" class="card-link-custom">
                <i class="bi bi-journal-text me-2 text-danger"></i> –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ñ—É—Ä–Ω–∞–ª –ù–°
            </a>
        </div>
        <div class="col-md-4">
            <a href="/ui/facilities" class="card-link-custom">
                <i class="bi bi-geo-alt me-2 text-primary"></i> –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –æ–±'—î–∫—Ç–∞–º–∏
            </a>
        </div>
        <div class="col-md-4">
            <a href="/ui/costs" class="card-link-custom">
                <i class="bi bi-cash me-2 text-success"></i> –û–±–ª—ñ–∫ –≤–∏—Ç—Ä–∞—Ç
            </a>
        </div>
    </div>

</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {

        const typeCtx = document.getElementById('emergencyTypeChart');
        if (typeCtx) {
            new Chart(typeCtx, {
                type: 'bar',
                data: {
                    labels: ['–†–∞–¥—ñ–∞—Ü—ñ–π–Ω—ñ', '–•—ñ–º—ñ—á–Ω—ñ', '–ü—Ä–∏—Ä–æ–¥–Ω—ñ', '–Ü–Ω—à—ñ'],
                    datasets: [{
                        label: '–ö—ñ–ª—å–∫—ñ—Å—Ç—å –ù–°',
                        data: [5, 4, 3, 3],
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.8)',
                            'rgba(255, 159, 64, 0.8)',
                            'rgba(75, 192, 192, 0.8)',
                            'rgba(153, 102, 255, 0.8)'
                        ],
                        borderColor: 'rgba(255, 255, 255, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    plugins: {
                        legend: { display: false },
                        title: { display: false }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            grid: { display: false }
                        },
                        y: {
                            grid: { display: false }
                        }
                    }
                }
            });
        }
    });
</script>

</body>
</html>